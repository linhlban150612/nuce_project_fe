import{c as H,b as S,o as q,r as g,bB as P,bC as R,j as e}from"./index-5d1582d4.js";import{N as u}from"./Notification-b903467d.js";import{d as a,D as l}from"./index-81ffed24.js";import{F as i}from"./index-2daf2b68.js";import{R as x,C as m}from"./row-140c9d21.js";import{I as Y}from"./index-87f528a8.js";import{S as T}from"./index-a21a4ee5.js";import{B as A}from"./button-1dd3c86b.js";import{E as M}from"./EnterOutlined-5a77cb95.js";import"./render-43f47cb9.js";import"./asyncToGenerator-f41fc0b7.js";import"./ExclamationCircleFilled-3566f72d.js";import"./CloseOutlined-21301cb3.js";import"./useZIndex-412122f7.js";import"./useCSSVarCls-2b45069f.js";import"./PurePanel-9c90c19c.js";import"./useMergedState-a94f801d.js";import"./Compact-de17ca2f.js";import"./ResizeObserver.es-f4289e8a.js";import"./pickAttrs-c42834d1.js";import"./index-8ab4410e.js";import"./Overflow-dad1924c.js";import"./SearchOutlined-54091923.js";import"./index-c0762df4.js";import"./compact-item-f6aa6deb.js";import"./move-8c08fc05.js";import"./index-98be3a7d.js";import"./reactNode-ed0d3403.js";import"./useLocale-98ce2b95.js";import"./collapse-97de76d4.js";import"./responsiveObserver-74647030.js";import"./DownOutlined-e8684ab4.js";import"./UpOutlined-9e60ac00.js";import"./BaseInput-5f67969b.js";import"./index-3f290c1a.js";import"./CheckOutlined-9e439339.js";const{RangePicker:O}=l,Ne=()=>{var p;const{idDoctor:f}=H(),d=S(),[n]=i.useForm(),s=q(),[b,j]=g.useState(null),[k,{isLoading:y}]=P(),{data:c}=R();g.useEffect(()=>{n.setFieldsValue({date:s!=null&&s.state?a(s==null?void 0:s.state):void 0})},[s,n]);const N=t=>{if(t){const r=t.clone().subtract(1,"hour");j(r),n.setFieldsValue({expiredTime:r})}},E=t=>{const r=t==null?void 0:t[0];N(r)},w=(t,r,o)=>{r&&a(r).isBefore(a(),"day")?o("Ngày không được nhỏ hơn ngày hiện tại!"):o()},C=async t=>{const r=a(t.date).format("YYYY-MM-DD"),o=a(t.expiredTime).format("HH:mm:ss"),I=a(t.time[0]).format("HH:mm:ss"),B=a(t.time[1]).format("HH:mm:ss"),L=r.concat(" ",o),D=r.concat(" ",I),F=r.concat(" ",B);delete t.time,delete t.date,delete t.expiredTime,await k({...t,bookingExpiredTime:L,startTime:D,endTime:F,status:1,idDoctor:f}).unwrap().then(()=>{u("success","Thành công","Tạo lịch khám thành công"),d(-1)}).catch(h=>{u("error","Lỗi",h.data.message||h.data)})};return e.jsxs("div",{className:"",children:[e.jsxs("button",{onClick:()=>d(-1),children:["Quay lại ",e.jsx(M,{})]}),e.jsx("h2",{className:"my-6 mx-16 text-2xl font-semibold",children:"Tạo lịch khám"}),e.jsxs(i,{className:"mx-40",form:n,name:"basic",labelCol:{span:24},wrapperCol:{span:24},onFinish:C,labelWrap:!0,autoComplete:"off",children:[e.jsxs(x,{gutter:30,children:[e.jsx(m,{span:12,children:e.jsx(i.Item,{label:"Lượng khách tối đa",name:"maxNumber",rules:[{required:!0,message:"Trường này không được bỏ trống !"},{type:"number",min:1,message:"Lượng khách tối thiểu là 1!"},{type:"number",max:15,message:"Lượng khách tối đa là 15!"}],children:e.jsx(Y,{placeholder:"Lượng khách tối đa",className:"w-full"})})}),e.jsx(m,{span:12,children:e.jsx(i.Item,{name:"whoPay",label:"Người thanh toán",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(T,{placeholder:"---Select---",className:"w-full",allowClear:!0,children:(p=c==null?void 0:c.data)==null?void 0:p.map(t=>e.jsx(T.Option,{value:t.code,children:t.value},t.code))})})}),e.jsx(m,{span:12,children:e.jsx(i.Item,{name:"date",label:"Ngày khám",rules:[{required:!0,message:"Trường này không được bỏ trống !"},{validator:w}],children:e.jsx(l,{className:"w-full"})})})]}),e.jsxs(x,{gutter:30,children:[e.jsx(m,{span:12,children:e.jsx(i.Item,{name:"time",label:"Thời gian khám",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(O,{picker:"time",className:"w-full",placeholder:["Thời gian bắt đầu","Thời gian kết thúc"],onChange:E})})}),e.jsx(m,{span:12,children:e.jsx(i.Item,{name:"expiredTime",label:"Thời gian lịch đặt hết hạn",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(l,{picker:"time",className:"w-full",value:b})})})]}),e.jsx(i.Item,{labelAlign:"left",children:e.jsx(A,{type:"primary",htmlType:"submit",className:"bg-blue-500",loading:y,children:"Thêm"})})]})]})};export{Ne as default};
