import{b as ie,r as l,P as re,p as le,H as oe,I as de,l as ce,m as me,Q as he,D as pe,j as e,L as ge}from"./index-5d1582d4.js";import{n as ue}from"./index-d5b70956.js";import{O as o}from"./index-1b5c3fd7.js";import{N as c}from"./Notification-b903467d.js";import{d as w,C as F}from"./ckeditor-05c5dc69.js";import{F as s}from"./index-2daf2b68.js";import{R as A,C as t}from"./row-140c9d21.js";import{I as m}from"./index-ef77481e.js";import{S as d}from"./index-a21a4ee5.js";import{U as xe}from"./index-1567c69b.js";import{B as je}from"./button-1dd3c86b.js";import{E as fe}from"./EnterOutlined-5a77cb95.js";import{M as be}from"./MailOutlined-1304650d.js";import{U as Q}from"./UserOutlined-93acf3c1.js";import{L as M}from"./compact-item-f6aa6deb.js";import{P as Te}from"./PlusOutlined-c3648a15.js";import"./iconBase-7dfc76c2.js";import"./BaseInput-5f67969b.js";import"./useMergedState-a94f801d.js";import"./Compact-de17ca2f.js";import"./ResizeObserver.es-f4289e8a.js";import"./useZIndex-412122f7.js";import"./index-8ab4410e.js";import"./index-3aef6c56.js";import"./Overflow-dad1924c.js";import"./PurePanel-9c90c19c.js";import"./SearchOutlined-54091923.js";import"./asyncToGenerator-f41fc0b7.js";import"./index-8ccb2d3a.js";import"./reactNode-ed0d3403.js";import"./index-c0762df4.js";import"./useCSSVarCls-2b45069f.js";import"./render-43f47cb9.js";import"./ExclamationCircleFilled-3566f72d.js";import"./CloseOutlined-21301cb3.js";import"./index-98be3a7d.js";import"./collapse-97de76d4.js";import"./useLocale-98ce2b95.js";import"./responsiveObserver-74647030.js";import"./pickAttrs-c42834d1.js";import"./index-3f290c1a.js";import"./move-8c08fc05.js";import"./CheckOutlined-9e439339.js";import"./DownOutlined-e8684ab4.js";import"./fade-72ecde73.js";import"./useForceUpdate-3f4a0339.js";const pa=()=>{var k,S,D,N,L,R,q,v;const P=ie(),[h]=s.useForm(),[i,V]=l.useState("USER"),[T,H]=l.useState(null),[y,G]=l.useState(null),[I,O]=l.useState(!1),[_,z]=l.useState(""),[B,W]=l.useState(""),{data:p,isLoading:C}=re(),{data:g}=le(),{data:u,isLoading:K}=oe(_),{data:x,isLoading:X}=de(B),{data:j,isLoading:Z}=ce({name:"",status:"1",page:0,resultLimit:500}),{data:f,isLoading:J}=me({search:"",province:"",status:"1",page:0,resultLimit:500}),[Y]=he(),[$,{isLoading:ee}]=pe(),ae=a=>{z(a)},se=a=>{W(a)},te=async a=>{G(a),O(!0),setTimeout(()=>{const n=URL.createObjectURL(a);H(n),O(!1)},2e3)},ne=async a=>{try{delete a.imageObjectId;const n={roles:a.roles,name:a.name,lastName:a.lastName,email:a.email,doctorInfoDTO:i==="DOCTOR"?{province:a.province,district:a.district,clinicsId:a.clinicsId,descriptionHtml:a.descriptionHtml,note:a.note,specialitiesId:a.specialitiesId,ward:a.ward,address:a.address}:null};Y(n).unwrap().then(r=>{var E;const U=(E=r==null?void 0:r.data)==null?void 0:E.data,b=new FormData;y&&b.append("image",y),U&&b.append("id",U),$(b),c("success","Thành công","Thêm thành công"),P("/admin/quan-ly-tai-khoan")}).catch(r=>{console.error("Error adding account:",r),c("error","Lỗi","Thêm không thành công")})}catch(n){console.error("Error adding specialty:",n),c("error","Lỗi","Thêm không thành công")}};return e.jsxs("div",{className:"",children:[e.jsxs(ge,{to:"/admin/quan-ly-tai-khoan",children:["Quay lại ",e.jsx(fe,{})]}),e.jsx("h2",{className:"my-6 mx-16 text-2xl font-semibold",children:"Tạo tài khoản"}),e.jsxs(s,{className:"mx-40",form:h,name:"basic",labelCol:{span:24},wrapperCol:{span:24},onFinish:ne,labelWrap:!0,autoComplete:"off",children:[e.jsxs(A,{gutter:26,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Trường này không được bỏ trống !"},{min:3,message:"Tối thiểu 3 ký tự!"}],children:e.jsx(m,{placeholder:"Nhập email",prefix:e.jsx(be,{className:" site-form-item-icon p-3 text-blue-500"})})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Họ",name:"name",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(m,{prefix:e.jsx(Q,{className:"site-form-item-icon p-2.5 text-blue-500"}),placeholder:"Họ cá nhân"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Tên",name:"lastName",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(m,{prefix:e.jsx(Q,{className:"site-form-item-icon p-2.5 text-blue-500"}),placeholder:"Tên cá nhân"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"roles",label:"Vai trò",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(d,{className:"w-full h-11",loading:C,onChange:a=>V(a),placeholder:"---Select---",children:(k=p==null?void 0:p.data)==null?void 0:k.map(a=>e.jsx(o,{value:a.value,children:a.name},a.value))})})})]}),i==="DOCTOR"&&e.jsxs("div",{children:[e.jsx("h2",{className:"font-medium text-gray-700 text-lg my-2",children:"Thông tin bác sĩ"}),e.jsxs(A,{gutter:26,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"Ảnh",name:"imageObjectId",rules:[{required:i==="DOCTOR",message:"Trường này không được bỏ trống !"}],children:e.jsx(xe,{beforeUpload:a=>{const n="2";a.size/1024/1024<n?te(a):c("warning","Cảnh báo","Ảnh không được quá "+n.toString()+"MB")},showUploadList:!1,listType:"picture-card",accept:"image/*",children:T?I?e.jsxs("div",{children:[e.jsx(M,{}),e.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):e.jsx("img",{src:T,alt:"Ảnh đã upload",style:{width:"100%"}}):e.jsx("div",{children:I?e.jsxs("div",{children:[e.jsx(M,{}),e.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):e.jsxs("div",{children:[e.jsx(Te,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"province",label:"Tỉnh/Thành phố",rules:[{required:i==="DOCTOR",message:"Trường này không được bỏ trống !"}],children:e.jsx(d,{defaultValue:"---Select---",className:"w-full h-11",loading:C,onChange:ae,children:(S=g==null?void 0:g.data)==null?void 0:S.map(a=>e.jsx(o,{value:a.code,children:a.name},a.code))})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"district",label:"Quận/Huyện",rules:[{required:i==="DOCTOR",message:"Trường này không được bỏ trống !"}],children:e.jsx(d,{defaultValue:"---Select---",className:"w-full h-11",loading:K,onChange:se,children:(D=u==null?void 0:u.data)==null?void 0:D.map(a=>e.jsx(o,{value:a.code,children:a.name},a.code))})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"ward",label:"Phường/Xã",rules:[{required:i==="DOCTOR",message:"Trường này không được bỏ trống !"}],children:e.jsx(d,{defaultValue:"---Select---",className:"w-full h-11",loading:X,children:(N=x==null?void 0:x.data)==null?void 0:N.map(a=>e.jsx(o,{value:a.code,children:a.name},a.code))})})}),e.jsx(t,{span:24,children:e.jsx(s.Item,{label:"Địa chỉ",name:"address",rules:[{required:i==="DOCTOR",message:"Trường này không được bỏ trống !"}],children:e.jsx(m,{placeholder:"Địa chỉ",className:"p-3"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"clinicsId",label:"Phòng khám",rules:[{required:i==="DOCTOR",message:"Trường này không được bỏ trống !"}],children:e.jsx(d,{defaultValue:"---Select---",className:"w-full h-11",loading:J,children:(R=(L=f==null?void 0:f.data)==null?void 0:L.data)==null?void 0:R.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"specialitiesId",label:"Chuyên khoa",rules:[{required:i==="DOCTOR",message:"Trường này không được bỏ trống !"}],children:e.jsx(d,{defaultValue:"---Select---",className:"w-full h-11",loading:Z,children:(v=(q=j==null?void 0:j.data)==null?void 0:q.data)==null?void 0:v.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})})}),e.jsx(t,{span:24,children:e.jsx(s.Item,{label:"Ghi chú giá khám",name:"note",rules:[{required:i==="DOCTOR",message:"Trường này không được bỏ trống !"}],children:e.jsx(w.CKEditor,{editor:F,onChange:(a,n)=>{const r=n.getData();h.setFieldsValue({note:r})}})})}),e.jsx(t,{span:24,children:e.jsx(s.Item,{name:"descriptionHtml",label:"Mô tả",rules:[{required:!0,message:"Vui lòng không bỏ trống"}],children:e.jsx(w.CKEditor,{editor:F,onChange:(a,n)=>{const r=n.getData();h.setFieldsValue({descriptionHtml:r})}})})})]})]}),e.jsx(s.Item,{labelAlign:"left",children:e.jsx(je,{type:"primary",htmlType:"submit",className:"bg-blue-500",children:ee?e.jsx(ue,{className:"animate-spin"}):"Thêm"})})]})]})};export{pa as default};
