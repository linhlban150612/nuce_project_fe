import{r as n,Z as F,$ as H,a0 as V,a1 as le,a3 as ce,a4 as I,Y as N}from"./index-5d1582d4.js";import{R as de}from"./useMergedState-a94f801d.js";import{r as pe}from"./responsiveObserver-74647030.js";import{u as ge,t as me}from"./Compact-de17ca2f.js";import{u as ue}from"./useBreakpoint-945b7321.js";import{u as D}from"./useCSSVarCls-2b45069f.js";import{g as fe}from"./index-8ab4410e.js";import{i as ve,g as he,P as ye,b as Se,a as be,d as Ce,T as xe}from"./index-98be3a7d.js";import{c as $e}from"./reactNode-ed0d3403.js";const Oe=n.createContext({}),M=Oe,Pe=e=>{const{antCls:r,componentCls:o,iconCls:t,avatarBg:a,avatarColor:s,containerSize:l,containerSizeLG:i,containerSizeSM:c,textFontSize:g,textFontSizeLG:f,textFontSizeSM:y,borderRadius:d,borderRadiusLG:p,borderRadiusSM:v,lineWidth:h,lineType:z}=e,b=(C,O,E)=>({width:C,height:C,borderRadius:"50%",[`&${o}-square`]:{borderRadius:E},[`&${o}-icon`]:{fontSize:O,[`> ${t}`]:{margin:0}}});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},V(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:s,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${le(h)} ${z} transparent`,"&-image":{background:"transparent"},[`${r}-image-img`]:{display:"block"}}),b(l,g,d)),{"&-lg":Object.assign({},b(i,f,p)),"&-sm":Object.assign({},b(c,y,v)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},ze=e=>{const{componentCls:r,groupBorderColor:o,groupOverlapping:t,groupSpace:a}=e;return{[`${r}-group`]:{display:"inline-flex",[`${r}`]:{borderColor:o},"> *:not(:first-child)":{marginInlineStart:t}},[`${r}-group-popover`]:{[`${r} + ${r}`]:{marginInlineStart:a}}}},Ee=e=>{const{controlHeight:r,controlHeightLG:o,controlHeightSM:t,fontSize:a,fontSizeLG:s,fontSizeXL:l,fontSizeHeading3:i,marginXS:c,marginXXS:g,colorBorderBg:f}=e;return{containerSize:r,containerSizeLG:o,containerSizeSM:t,textFontSize:Math.round((s+l)/2),textFontSizeLG:i,textFontSizeSM:a,groupSpace:g,groupOverlapping:-c,groupBorderColor:f}},X=F("Avatar",e=>{const{colorTextLightSolid:r,colorTextPlaceholder:o}=e,t=H(e,{avatarBg:o,avatarColor:r});return[Pe(t),ze(t)]},Ee);var we=globalThis&&globalThis.__rest||function(e,r){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const je=(e,r)=>{const[o,t]=n.useState(1),[a,s]=n.useState(!1),[l,i]=n.useState(!0),c=n.useRef(null),g=n.useRef(null),f=ce(r,c),{getPrefixCls:y,avatar:d}=n.useContext(I),p=n.useContext(M),v=()=>{if(!g.current||!c.current)return;const m=g.current.offsetWidth,u=c.current.offsetWidth;if(m!==0&&u!==0){const{gap:P=4}=e;P*2<u&&t(u-P*2<m?(u-P*2)/m:1)}};n.useEffect(()=>{s(!0)},[]),n.useEffect(()=>{i(!0),t(1)},[e.src]),n.useEffect(v,[e.gap]);const h=()=>{const{onError:m}=e;(m==null?void 0:m())!==!1&&i(!1)},{prefixCls:z,shape:b,size:C,src:O,srcSet:E,icon:x,className:T,rootClassName:w,alt:B,draggable:J,children:A,crossOrigin:Q}=e,k=we(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),S=ge(m=>{var u,P;return(P=(u=C??(p==null?void 0:p.size))!==null&&u!==void 0?u:m)!==null&&P!==void 0?P:"default"}),K=Object.keys(typeof S=="object"?S||{}:{}).some(m=>["xs","sm","md","lg","xl","xxl"].includes(m)),W=ue(K),ee=n.useMemo(()=>{if(typeof S!="object")return{};const m=pe.find(P=>W[P]),u=S[m];return u?{width:u,height:u,fontSize:u&&(x||A)?u/2:18}:{}},[W,S]),$=y("avatar",z),_=D($),[te,re,oe]=X($,_),ne=N({[`${$}-lg`]:S==="large",[`${$}-sm`]:S==="small"}),L=n.isValidElement(O),ae=b||(p==null?void 0:p.shape)||"circle",se=N($,ne,d==null?void 0:d.className,`${$}-${ae}`,{[`${$}-image`]:L||O&&l,[`${$}-icon`]:!!x},oe,_,T,w,re),ie=typeof S=="number"?{width:S,height:S,fontSize:x?S/2:18}:{};let j;if(typeof O=="string"&&l)j=n.createElement("img",{src:O,draggable:J,srcSet:E,onError:h,alt:B,crossOrigin:Q});else if(L)j=O;else if(x)j=x;else if(a||o!==1){const m=`scale(${o})`,u={msTransform:m,WebkitTransform:m,transform:m};j=n.createElement(de,{onResize:v},n.createElement("span",{className:`${$}-string`,ref:g,style:Object.assign({},u)},A))}else j=n.createElement("span",{className:`${$}-string`,style:{opacity:0},ref:g},A);return delete k.onError,delete k.gap,te(n.createElement("span",Object.assign({},k,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ie),ee),d==null?void 0:d.style),k.style),className:se,ref:f}),j))},Ne=n.forwardRef(je),Y=Ne,R=e=>e?typeof e=="function"?e():e:null,Te=e=>{const{componentCls:r,popoverColor:o,titleMinWidth:t,fontWeightStrong:a,innerPadding:s,boxShadowSecondary:l,colorTextHeading:i,borderRadiusLG:c,zIndexPopup:g,titleMarginBottom:f,colorBgElevated:y,popoverBg:d,titleBorderBottom:p,innerContentPadding:v,titlePadding:h}=e;return[{[r]:Object.assign(Object.assign({},V(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:g,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":y,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${r}-content`]:{position:"relative"},[`${r}-inner`]:{backgroundColor:d,backgroundClip:"padding-box",borderRadius:c,boxShadow:l,padding:s},[`${r}-title`]:{minWidth:t,marginBottom:f,color:i,fontWeight:a,borderBottom:p,padding:h},[`${r}-inner-content`]:{color:o,padding:v}})},he(e,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${r}-content`]:{display:"inline-block"}}}]},Be=e=>{const{componentCls:r}=e;return{[r]:ye.map(o=>{const t=e[`${o}6`];return{[`&${r}-${o}`]:{"--antd-arrow-background-color":t,[`${r}-inner`]:{backgroundColor:t},[`${r}-arrow`]:{background:"transparent"}}}})}},ke=e=>{const{lineWidth:r,controlHeight:o,fontHeight:t,padding:a,wireframe:s,zIndexPopupBase:l,borderRadiusLG:i,marginXS:c,lineType:g,colorSplit:f,paddingSM:y}=e,d=o-t,p=d/2,v=d/2-r,h=a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:l+30},Se(e)),be({contentRadius:i,limitVerticalRadius:!0})),{innerPadding:s?0:12,titleMarginBottom:s?0:c,titlePadding:s?`${p}px ${h}px ${v}px`:0,titleBorderBottom:s?`${r}px ${g} ${f}`:"none",innerContentPadding:s?`${y}px ${h}px`:0})},Z=F("Popover",e=>{const{colorBgElevated:r,colorText:o}=e,t=H(e,{popoverBg:r,popoverColor:o});return[Te(t),Be(t),ve(t,"zoom-big")]},ke,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Re=globalThis&&globalThis.__rest||function(e,r){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const Ie=(e,r,o)=>!r&&!o?null:n.createElement(n.Fragment,null,r&&n.createElement("div",{className:`${e}-title`},R(r)),n.createElement("div",{className:`${e}-inner-content`},R(o))),Ae=e=>{const{hashId:r,prefixCls:o,className:t,style:a,placement:s="top",title:l,content:i,children:c}=e;return n.createElement("div",{className:N(r,o,`${o}-pure`,`${o}-placement-${s}`,t),style:a},n.createElement("div",{className:`${o}-arrow`}),n.createElement(Ce,Object.assign({},e,{className:r,prefixCls:o}),c||Ie(o,l,i)))},Me=e=>{const{prefixCls:r,className:o}=e,t=Re(e,["prefixCls","className"]),{getPrefixCls:a}=n.useContext(I),s=a("popover",r),[l,i,c]=Z(s);return l(n.createElement(Ae,Object.assign({},t,{prefixCls:s,hashId:i,className:N(o,c)})))},We=Me;var _e=globalThis&&globalThis.__rest||function(e,r){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const Le=e=>{let{title:r,content:o,prefixCls:t}=e;return n.createElement(n.Fragment,null,r&&n.createElement("div",{className:`${t}-title`},R(r)),n.createElement("div",{className:`${t}-inner-content`},R(o)))},q=n.forwardRef((e,r)=>{const{prefixCls:o,title:t,content:a,overlayClassName:s,placement:l="top",trigger:i="hover",mouseEnterDelay:c=.1,mouseLeaveDelay:g=.1,overlayStyle:f={}}=e,y=_e(e,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:d}=n.useContext(I),p=d("popover",o),[v,h,z]=Z(p),b=d(),C=N(s,h,z);return v(n.createElement(xe,Object.assign({placement:l,trigger:i,mouseEnterDelay:c,mouseLeaveDelay:g,overlayStyle:f},y,{prefixCls:p,overlayClassName:C,ref:r,overlay:t||a?n.createElement(Le,{prefixCls:p,title:t,content:a}):null,transitionName:fe(b,"zoom-big",y.transitionName),"data-popover-inject":!0})))});q._InternalPanelDoNotUseOrYouWillBeFired=We;const Ge=q,G=e=>{const{size:r,shape:o}=n.useContext(M),t=n.useMemo(()=>({size:e.size||r,shape:e.shape||o}),[e.size,e.shape,r,o]);return n.createElement(M.Provider,{value:t},e.children)},Fe=e=>{const{getPrefixCls:r,direction:o}=n.useContext(I),{prefixCls:t,className:a,rootClassName:s,style:l,maxCount:i,maxStyle:c,size:g,shape:f,maxPopoverPlacement:y="top",maxPopoverTrigger:d="hover",children:p}=e,v=r("avatar",t),h=`${v}-group`,z=D(v),[b,C,O]=X(v,z),E=N(h,{[`${h}-rtl`]:o==="rtl"},O,z,a,s,C),x=me(p).map((w,B)=>$e(w,{key:`avatar-key-${B}`})),T=x.length;if(i&&i<T){const w=x.slice(0,i),B=x.slice(i,T);return w.push(n.createElement(Ge,{key:"avatar-popover-key",content:B,trigger:d,placement:y,overlayClassName:`${h}-popover`,destroyTooltipOnHide:!0},n.createElement(Y,{style:c},`+${T-i}`))),b(n.createElement(G,{shape:f,size:g},n.createElement("div",{className:E,style:l},w)))}return b(n.createElement(G,{shape:f,size:g},n.createElement("div",{className:E,style:l},x)))},He=Fe,U=Y;U.Group=He;const Ke=U;export{Ke as A};
