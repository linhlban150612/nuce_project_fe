import{c as F,b as L,r as m,bx as E,D as S,j as e}from"./index-5d1582d4.js";import{n as w}from"./index-d5b70956.js";import{N as l}from"./Notification-b903467d.js";import{d as u,C as x}from"./ckeditor-05c5dc69.js";import{F as a}from"./index-2daf2b68.js";import{R as N,C as r}from"./row-140c9d21.js";import{U as k}from"./index-1567c69b.js";import{I as M}from"./index-ef77481e.js";import{B as O}from"./button-1dd3c86b.js";import{E as D}from"./EnterOutlined-5a77cb95.js";import{L as j}from"./compact-item-f6aa6deb.js";import{P as q}from"./PlusOutlined-c3648a15.js";import"./iconBase-7dfc76c2.js";import"./render-43f47cb9.js";import"./asyncToGenerator-f41fc0b7.js";import"./ExclamationCircleFilled-3566f72d.js";import"./CloseOutlined-21301cb3.js";import"./useZIndex-412122f7.js";import"./useCSSVarCls-2b45069f.js";import"./index-8ab4410e.js";import"./useMergedState-a94f801d.js";import"./Compact-de17ca2f.js";import"./ResizeObserver.es-f4289e8a.js";import"./SearchOutlined-54091923.js";import"./index-98be3a7d.js";import"./reactNode-ed0d3403.js";import"./collapse-97de76d4.js";import"./useLocale-98ce2b95.js";import"./responsiveObserver-74647030.js";import"./pickAttrs-c42834d1.js";import"./fade-72ecde73.js";import"./useForceUpdate-3f4a0339.js";import"./CheckOutlined-9e439339.js";import"./index-c0762df4.js";import"./BaseInput-5f67969b.js";const fe=()=>{const{idDoctor:f}=F(),d=L(),[n]=a.useForm(),[c,b]=m.useState(null),[p,I]=m.useState(null),[h,g]=m.useState(!1),[v]=E(),[T,{isLoading:y}]=S(),C=async s=>{I(s),g(!0),setTimeout(()=>{const t=URL.createObjectURL(s);b(t),g(!1)},2e3)},U=async s=>{delete s.imageObjectId,s.doctorId=f,await v(s).unwrap().then(t=>{const i=t==null?void 0:t.data,o=new FormData;p&&o.append("image",p),i&&o.append("id",i),T(o).unwrap().then(()=>{l("success","Thành công","Tạo dịch vụ thành công"),d(-1)})}).catch(t=>{l("error","Lỗi",t.data.message||t.data)})};return e.jsxs("div",{className:"",children:[e.jsxs("button",{onClick:()=>d(-1),children:["Quay lại ",e.jsx(D,{})]}),e.jsx("h2",{className:"my-6 mx-16 text-2xl font-semibold",children:"Tạo dịch vụ"}),e.jsxs(a,{className:"mx-40",form:n,name:"basic",labelCol:{span:24},wrapperCol:{span:24},onFinish:U,labelWrap:!0,autoComplete:"off",children:[e.jsxs(N,{gutter:26,children:[e.jsx(r,{span:12,children:e.jsx(a.Item,{label:"Ảnh",name:"imageObjectId",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(k,{beforeUpload:s=>{const t="2";s.size/1024/1024<t?C(s):l("warning","Cảnh báo","Ảnh không được quá "+t.toString()+"MB")},showUploadList:!1,listType:"picture-card",accept:"image/*",children:c?h?e.jsxs("div",{children:[e.jsx(j,{}),e.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):e.jsx("img",{src:c,alt:"Ảnh đã upload",style:{width:"100%"}}):e.jsx("div",{children:h?e.jsxs("div",{children:[e.jsx(j,{}),e.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):e.jsxs("div",{children:[e.jsx(q,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})})}),e.jsx(r,{span:12,children:e.jsx(a.Item,{label:"Tên dịch vụ",name:"name",rules:[{required:!0,message:"Trường này không được bỏ trống !"},{min:6,message:"Tên dịch vụ phải lớn hơn 6 kí tự!"}],children:e.jsx(M,{placeholder:"Tên dịch vụ"})})}),e.jsx(r,{span:24,children:e.jsx(a.Item,{label:"Giá",name:"note",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(u.CKEditor,{editor:x,onChange:(s,t)=>{const i=t.getData();n.setFieldsValue({note:i})}})})}),e.jsx(r,{span:24,children:e.jsx(a.Item,{name:"descriptionHtml",label:"Mô tả",rules:[{required:!0,message:"Vui lòng không bỏ trống"}],children:e.jsx(u.CKEditor,{editor:x,onChange:(s,t)=>{const i=t.getData();n.setFieldsValue({descriptionHtml:i})}})})})]}),e.jsx(a.Item,{labelAlign:"left",children:e.jsx(O,{type:"primary",htmlType:"submit",className:"bg-blue-500",children:y?e.jsx(w,{className:"animate-spin"}):"Thêm"})})]})]})};export{fe as default};
