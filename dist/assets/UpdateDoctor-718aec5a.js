import{b as le,c as de,r as d,R as me,p as ce,H as oe,I as he,l as pe,m as ue,T as ge,D as xe,j as e,L as je}from"./index-5d1582d4.js";import{O as o}from"./index-1b5c3fd7.js";import{N as p}from"./Notification-b903467d.js";import{d as _,C as z}from"./ckeditor-05c5dc69.js";import{F as i}from"./index-2daf2b68.js";import{S as fe}from"./index-8ccb2d3a.js";import{R as ye,C as r}from"./row-140c9d21.js";import{U as be}from"./index-1567c69b.js";import{S as h}from"./index-a21a4ee5.js";import{I as Ie}from"./index-ef77481e.js";import{B as ve}from"./button-1dd3c86b.js";import{E as Se}from"./EnterOutlined-5a77cb95.js";import{L as W}from"./compact-item-f6aa6deb.js";import{P as Ce}from"./PlusOutlined-c3648a15.js";import"./BaseInput-5f67969b.js";import"./useMergedState-a94f801d.js";import"./Compact-de17ca2f.js";import"./ResizeObserver.es-f4289e8a.js";import"./useZIndex-412122f7.js";import"./index-8ab4410e.js";import"./index-3aef6c56.js";import"./Overflow-dad1924c.js";import"./PurePanel-9c90c19c.js";import"./SearchOutlined-54091923.js";import"./asyncToGenerator-f41fc0b7.js";import"./index-c0762df4.js";import"./useCSSVarCls-2b45069f.js";import"./render-43f47cb9.js";import"./ExclamationCircleFilled-3566f72d.js";import"./CloseOutlined-21301cb3.js";import"./index-98be3a7d.js";import"./reactNode-ed0d3403.js";import"./collapse-97de76d4.js";import"./useLocale-98ce2b95.js";import"./responsiveObserver-74647030.js";import"./pickAttrs-c42834d1.js";import"./fade-72ecde73.js";import"./useForceUpdate-3f4a0339.js";import"./CheckOutlined-9e439339.js";import"./index-3f290c1a.js";import"./move-8c08fc05.js";import"./DownOutlined-e8684ab4.js";const ps=()=>{var N,E,w,F,q,P,V,O,Q;const K=le(),{id:I}=de(),[m]=i.useForm(),[v,S]=d.useState(null),[C,X]=d.useState(null),[L,T]=d.useState(!1),[u,U]=d.useState(""),[g,k]=d.useState(""),{data:s,isLoading:Z}=me(I||""),{data:x}=ce(),{data:j,isLoading:J}=oe(u),{data:f,isLoading:Y}=he(g),{data:y,isLoading:$}=pe({name:"",status:"",page:0,resultLimit:500}),{data:b,isLoading:D}=ue({search:"",province:"",status:"",page:0,resultLimit:500}),[ee]=ge(),[se,{isLoading:ae}]=xe();d.useEffect(()=>{var a,n,t,l,c,G,M,H,R,A,B;m.setFieldsValue({note:(a=s==null?void 0:s.data)==null?void 0:a.note,address:(n=s==null?void 0:s.data)==null?void 0:n.address,province:(t=s==null?void 0:s.data)==null?void 0:t.province,district:(l=s==null?void 0:s.data)==null?void 0:l.district,ward:(c=s==null?void 0:s.data)==null?void 0:c.ward,clinicsId:(G=s==null?void 0:s.data)==null?void 0:G.clinicId,specialitiesId:(M=s==null?void 0:s.data)==null?void 0:M.specialityId}),(H=s==null?void 0:s.data)!=null&&H.imageUrl&&S((R=s==null?void 0:s.data)==null?void 0:R.imageUrl),!u&&!g&&(U(((A=s==null?void 0:s.data)==null?void 0:A.province)||""),k(((B=s==null?void 0:s.data)==null?void 0:B.district)||""))},[s,u,g,m]);const ne=a=>{U(a)},ie=a=>{k(a)},te=async a=>{X(a),T(!0),setTimeout(()=>{const n=URL.createObjectURL(a);S(n),T(!1)},2e3)},re=async a=>{try{delete a.imageObjectId,ee({...a,userId:I}).unwrap().then(n=>{var c;const t=(c=n==null?void 0:n.data)==null?void 0:c.data,l=new FormData;C&&l.append("image",C),t&&l.append("id",t),se(l),p("success","Thành công","Thêm thành công"),K("/admin/quan-ly-tai-khoan")}).catch(n=>{console.error("Error adding account:",n),p("error","Lỗi","Thêm không thành công")})}catch(n){console.error("Error adding specialty:",n),p("error","Lỗi","Thêm không thành công")}};return e.jsxs("div",{className:"",children:[e.jsxs(je,{to:"/admin/quan-ly-tai-khoan",children:["Quay lại ",e.jsx(Se,{})]}),e.jsx("h2",{className:"my-6 mx-16 text-2xl font-semibold",children:"Cập nhật thông tin bác sĩ"}),e.jsx(fe,{spinning:Z,children:e.jsxs(i,{className:"mx-40",form:m,name:"basic",labelCol:{span:24},wrapperCol:{span:24},onFinish:re,labelWrap:!0,autoComplete:"off",children:[e.jsx("h2",{className:"font-medium text-gray-700 text-lg my-2",children:"Thông tin bác sĩ"}),e.jsxs(ye,{gutter:26,children:[e.jsx(r,{span:12,children:e.jsx(i.Item,{label:"Ảnh",name:"imageObjectId",children:e.jsx(be,{beforeUpload:a=>{const n="2";a.size/1024/1024<n?te(a):p("warning","Cảnh báo","Ảnh không được quá "+n.toString()+"MB")},showUploadList:!1,listType:"picture-card",accept:"image/*",children:v?L?e.jsxs("div",{children:[e.jsx(W,{}),e.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):e.jsx("img",{src:v,alt:"Ảnh đã upload",style:{width:"100%",maxHeight:"100px"}}):e.jsx("div",{children:L?e.jsxs("div",{children:[e.jsx(W,{}),e.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):e.jsxs("div",{children:[e.jsx(Ce,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})})}),e.jsx(r,{span:12,children:e.jsx(i.Item,{name:"province",label:"Tỉnh/Thành phố",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(h,{defaultValue:"---Select---",className:"w-full h-11",onChange:ne,children:(N=x==null?void 0:x.data)==null?void 0:N.map(a=>e.jsx(o,{value:a.code,children:a.name},a.code))})})}),e.jsx(r,{span:12,children:e.jsx(i.Item,{name:"district",label:"Quận/Huyện",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(h,{defaultValue:"---Select---",className:"w-full h-11",loading:J,onChange:ie,children:(E=j==null?void 0:j.data)==null?void 0:E.map(a=>e.jsx(o,{value:a.code,children:a.name},a.code))})})}),e.jsx(r,{span:12,children:e.jsx(i.Item,{name:"ward",label:"Phường/Xã",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(h,{defaultValue:"---Select---",className:"w-full h-11",loading:Y,children:(w=f==null?void 0:f.data)==null?void 0:w.map(a=>e.jsx(o,{value:a.code,children:a.name},a.code))})})}),e.jsx(r,{span:24,children:e.jsx(i.Item,{label:"Địa chỉ",name:"address",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(Ie,{placeholder:"Địa chỉ",className:"p-3"})})}),e.jsx(r,{span:12,children:e.jsx(i.Item,{name:"clinicsId",label:"Phòng khám",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(h,{defaultValue:"---Select---",className:"w-full h-11",loading:D,children:(q=(F=b==null?void 0:b.data)==null?void 0:F.data)==null?void 0:q.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})})}),e.jsx(r,{span:12,children:e.jsx(i.Item,{name:"specialitiesId",label:"Chuyên khoa",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(h,{defaultValue:"---Select---",className:"w-full h-11",loading:$,children:(V=(P=y==null?void 0:y.data)==null?void 0:P.data)==null?void 0:V.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})})}),e.jsx(r,{span:24,children:e.jsx(i.Item,{label:"Ghi chú",name:"note",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(_.CKEditor,{data:(O=s==null?void 0:s.data)==null?void 0:O.note,editor:z,onChange:(a,n)=>{const t=n.getData();m.setFieldsValue({note:t})}})})}),e.jsx(r,{span:24,children:e.jsx(i.Item,{name:"descriptionHtml",label:"Mô tả",rules:[{required:!0,message:"Vui lòng không bỏ trống"}],children:e.jsx(_.CKEditor,{data:(Q=s==null?void 0:s.data)==null?void 0:Q.descriptionHtml,editor:z,onChange:(a,n)=>{const t=n.getData();m.setFieldsValue({descriptionHtml:t})}})})})]}),e.jsx(i.Item,{labelAlign:"left",children:e.jsx(ve,{type:"primary",htmlType:"submit",className:"bg-blue-500",loading:ae,children:"Cập nhật"})})]})})]})};export{ps as default};
