import{b as Z,r,p as Y,H as $,I as ee,m as ae,J as se,D as te,j as e,L as ne}from"./index-5d1582d4.js";import{d as ie,C as re}from"./ckeditor-05c5dc69.js";import{n as le}from"./index-d5b70956.js";import{N as o}from"./Notification-b903467d.js";import{O as d}from"./index-1b5c3fd7.js";import{F as s}from"./index-2daf2b68.js";import{R as oe,C as i}from"./row-140c9d21.js";import{I as N}from"./index-ef77481e.js";import{U as de}from"./index-1567c69b.js";import{S as m}from"./index-a21a4ee5.js";import{R as j}from"./index-3651fbdb.js";import{B as me}from"./button-1dd3c86b.js";import{E as ce}from"./EnterOutlined-5a77cb95.js";import{L as U}from"./compact-item-f6aa6deb.js";import{P as he}from"./PlusOutlined-c3648a15.js";import"./iconBase-7dfc76c2.js";import"./render-43f47cb9.js";import"./asyncToGenerator-f41fc0b7.js";import"./ExclamationCircleFilled-3566f72d.js";import"./CloseOutlined-21301cb3.js";import"./useZIndex-412122f7.js";import"./useCSSVarCls-2b45069f.js";import"./BaseInput-5f67969b.js";import"./useMergedState-a94f801d.js";import"./Compact-de17ca2f.js";import"./ResizeObserver.es-f4289e8a.js";import"./index-8ab4410e.js";import"./index-3aef6c56.js";import"./Overflow-dad1924c.js";import"./PurePanel-9c90c19c.js";import"./SearchOutlined-54091923.js";import"./index-8ccb2d3a.js";import"./reactNode-ed0d3403.js";import"./index-c0762df4.js";import"./index-98be3a7d.js";import"./collapse-97de76d4.js";import"./useLocale-98ce2b95.js";import"./responsiveObserver-74647030.js";import"./pickAttrs-c42834d1.js";import"./fade-72ecde73.js";import"./useForceUpdate-3f4a0339.js";import"./CheckOutlined-9e439339.js";import"./index-3f290c1a.js";import"./move-8c08fc05.js";import"./DownOutlined-e8684ab4.js";import"./index-949dd1fb.js";const ia=()=>{var v,I,T,k,L;const q=Z(),[l]=s.useForm(),[f,D]=r.useState(null),[b,E]=r.useState(null),[y,C]=r.useState(!1),[V,O]=r.useState(""),[P,M]=r.useState(""),[c,Q]=r.useState(!1),{data:h}=Y(),{data:u,isLoading:R}=$(V),{data:p,isLoading:A}=ee(P),{data:g,isLoading:G}=ae({search:"",province:"",status:"",page:0,resultLimit:100}),[H]=se(),[z,{isLoading:B}]=te(),W=a=>{O(a),l.setFieldValue("ward",""),l.setFieldValue("district","")},_=a=>{M(a),l.setFieldValue("ward","")},K=a=>{Q(a.target.value)},X=async a=>{E(a),C(!0),setTimeout(()=>{const t=URL.createObjectURL(a);D(t),C(!1)},2e3)},J=async a=>{try{delete a.imageObjectId;const t={...a,status:1};await H(t).unwrap().then(n=>{var w;const S=(w=n==null?void 0:n.data)==null?void 0:w.data,x=new FormData;b&&x.append("image",b),S&&x.append("id",S),z(x).unwrap().then(()=>{o("success","Thành công","Thêm thành công"),q("/admin/quan-ly-phong-kham")}).catch(F=>{o("error","Lỗi",F.message||F.data.message)})}).catch(n=>{o("error","Lỗi",n.message||n.data.message)})}catch(t){console.error("Error adding specialty:",t),o("error","Lỗi","Thêm không thành công")}};return e.jsxs("div",{className:"",children:[e.jsxs(ne,{to:"/admin/quan-ly-phong-kham",children:["Quay lại ",e.jsx(ce,{})]}),e.jsx("h2",{className:"my-6 mx-16 text-2xl font-semibold",children:"Tạo phòng khám"}),e.jsxs(s,{className:"mx-40",form:l,name:"basic",labelCol:{span:24},wrapperCol:{span:24},onFinish:J,labelWrap:!0,autoComplete:"off",children:[e.jsxs(oe,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"Tên phòng khám",name:"name",rules:[{required:!0,message:"Trường này không được bỏ trống !"},{min:3,message:"Tối thiểu 3 ký tự!"}],children:e.jsx(N,{})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"Ảnh",name:"imageObjectId",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(de,{beforeUpload:a=>{const t="2";a.size/1024/1024<t?X(a):o("warning","Cảnh báo","Ảnh không được quá "+t.toString()+"MB")},showUploadList:!1,listType:"picture-card",accept:"image/*",children:f?y?e.jsxs("div",{children:[e.jsx(U,{}),e.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):e.jsx("img",{src:f,alt:"Ảnh đã upload",style:{width:"100%"}}):e.jsx("div",{children:y?e.jsxs("div",{children:[e.jsx(U,{}),e.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):e.jsxs("div",{children:[e.jsx(he,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{name:"province",label:"Tỉnh/Thành phố",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(m,{defaultValue:"---Select---",className:"w-full h-11",onChange:W,children:(v=h==null?void 0:h.data)==null?void 0:v.map(a=>e.jsx(d,{value:a.code,children:a.name},a.code))})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{name:"district",label:"Quận/Huyện",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(m,{defaultValue:"---Select---",className:"w-full h-11",loading:R,onChange:_,children:(I=u==null?void 0:u.data)==null?void 0:I.map(a=>e.jsx(d,{value:a.code,children:a.name},a.code))})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{name:"ward",label:"Phường/Xã",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(m,{defaultValue:"---Select---",className:"w-full h-11",loading:A,children:(T=p==null?void 0:p.data)==null?void 0:T.map(a=>e.jsx(d,{value:a.code,children:a.name},a.code))})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"Địa chỉ",name:"address",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:e.jsx(N,{placeholder:"Địa chỉ",className:"p-3"})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{name:"isCurved",label:"Đây có phải là phòng khám con không?",children:e.jsxs(j.Group,{onChange:K,value:c,defaultValue:!1,children:[e.jsx(j,{value:!0,children:"Có"}),e.jsx(j,{value:!1,children:"Không"})]})})}),c&&e.jsx(i,{span:12,children:e.jsx(s.Item,{name:"clinicsId",label:"Phòng khám cha",rules:[{required:c,message:"Trường này không được bỏ trống !"}],children:e.jsx(m,{defaultValue:"---Select---",className:"w-full h-11",loading:G,children:(L=(k=g==null?void 0:g.data)==null?void 0:k.data)==null?void 0:L.map(a=>e.jsx(d,{value:a.id,children:a.name},a.id))})})})]}),e.jsx(s.Item,{name:"descriptionHtml",label:"Mô tả",rules:[{required:!0,message:"Vui lòng không bỏ trống"}],children:e.jsx(ie.CKEditor,{editor:re,onChange:(a,t)=>{const n=t.getData();l.setFieldsValue({descriptionHtml:n})}})}),e.jsx(s.Item,{labelAlign:"left",children:e.jsx(me,{type:"primary",htmlType:"submit",className:"bg-blue-500",children:B?e.jsx(le,{className:"animate-spin"}):"Thêm"})})]})]})};export{ia as default};
