import{r as y,M as O,N as M,P as F,C as E,j as e,L as V}from"./index-5d1582d4.js";import{l as R,m as D}from"./index-d5b70956.js";import{N as f}from"./Notification-b903467d.js";import{O as B}from"./index-1b5c3fd7.js";import{G}from"./iconBase-7dfc76c2.js";import{F as s}from"./index-2daf2b68.js";import{B as c}from"./button-1dd3c86b.js";import{I as P}from"./index-ef77481e.js";import{S as d}from"./index-a21a4ee5.js";import{T as Q,a as k}from"./index-89427187.js";import{E as _}from"./EditOutlined-0e95779a.js";import{S as Z,D as $}from"./index-4ad10529.js";import{M as z}from"./index-2499abbf.js";import{R as U}from"./ReloadOutlined-5d09a93f.js";import{S as q}from"./SearchOutlined-54091923.js";import{M as H}from"./MoreOutlined-371685d0.js";import{E as K}from"./ExclamationCircleFilled-3566f72d.js";import"./render-43f47cb9.js";import"./asyncToGenerator-f41fc0b7.js";import"./CloseOutlined-21301cb3.js";import"./useZIndex-412122f7.js";import"./useCSSVarCls-2b45069f.js";import"./BaseInput-5f67969b.js";import"./useMergedState-a94f801d.js";import"./Compact-de17ca2f.js";import"./ResizeObserver.es-f4289e8a.js";import"./index-8ab4410e.js";import"./index-3aef6c56.js";import"./Overflow-dad1924c.js";import"./PurePanel-9c90c19c.js";import"./index-8ccb2d3a.js";import"./reactNode-ed0d3403.js";import"./index-c0762df4.js";import"./compact-item-f6aa6deb.js";import"./index-98be3a7d.js";import"./collapse-97de76d4.js";import"./row-140c9d21.js";import"./responsiveObserver-74647030.js";import"./useLocale-98ce2b95.js";import"./pickAttrs-c42834d1.js";import"./index-3f290c1a.js";import"./move-8c08fc05.js";import"./CheckOutlined-9e439339.js";import"./DownOutlined-e8684ab4.js";import"./index-1944453b.js";import"./index-949dd1fb.js";import"./index-3651fbdb.js";import"./useBreakpoint-945b7321.js";import"./useForceUpdate-3f4a0339.js";import"./Pagination-bc2271f4.js";import"./LeftOutlined-79fdd531.js";import"./index-da9f04ea.js";import"./EllipsisOutlined-5f99f7fa.js";import"./extendsObject-e8a436b4.js";import"./useClosable-dc268733.js";import"./Dropdown-fc6ae30f.js";import"./fade-72ecde73.js";function W(r){return G({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3.16113 4.46924C5.58508 2.04529 9.44716 1.93599 12.0008 4.14133C14.5528 1.93599 18.4149 2.04529 20.8388 4.46924C23.2584 6.88884 23.3716 10.7414 21.1785 13.2952L13.4142 21.0862C12.6686 21.8318 11.4809 21.8657 10.6952 21.1879L10.5858 21.0862L2.82141 13.2952C0.628282 10.7414 0.741522 6.88884 3.16113 4.46924ZM4.57534 5.88345C2.86819 7.5906 2.81942 10.3281 4.42902 12.0942L4.57534 12.2474L12 19.672L17.3026 14.368L13.7677 10.8332L12.7071 11.8939C11.5355 13.0654 9.636 13.0654 8.46443 11.8939C7.29286 10.7223 7.29286 8.82279 8.46443 7.65122L10.5656 5.54872C8.85292 4.17762 6.37076 4.24042 4.7286 5.73712L4.57534 5.88345ZM13.0606 8.71188C13.4511 8.32135 14.0843 8.32135 14.4748 8.71188L18.7168 12.9538L19.4246 12.2474C21.1819 10.4901 21.1819 7.64081 19.4246 5.88345C17.7174 4.1763 14.9799 4.12752 13.2139 5.73712L13.0606 5.88345L9.87864 9.06543C9.51601 9.42806 9.49011 9.99991 9.80094 10.3924L9.87864 10.4796C10.2413 10.8423 10.8131 10.8682 11.2056 10.5573L11.2929 10.4796L13.0606 8.71188Z"},child:[]}]})(r)}const{confirm:X}=z,it=()=>{var p,h,u,x,g,j;const[r]=s.useForm(),[L,C]=y.useState(1),[n,{data:a,isLoading:v}]=O(),[N]=M(),{data:o,isLoading:w}=F(),{data:m}=E();y.useEffect(()=>{n({keyword:null,role:null,status:null,page:0,resultLimit:10})},[n]);const b=(t,i)=>{if(t!==void 0){const l=i==="1"?"Bạn có muốn chuyển trạng thái tài khoản này sang Active không??":"Bạn có muốn chuyển trạng thái tài khoản này sang Inactive không??";X({title:"Xác nhận xoá",icon:e.jsx(K,{}),content:l,okText:"Có",cancelText:"Không",okType:"danger",async onOk(){try{await N({id:t,status:i}),f("success","Thành công","Đã chuyển trạng thái tài khoản thành công!"),n({keyword:r.getFieldValue("keyword"),role:r.getFieldValue("role"),status:r.getFieldValue("status"),page:L,resultLimit:10})}catch{f("error","Lỗi","Lỗi khoá")}}})}},T=t=>{n({keyword:t.keyword,role:t.role,status:t.status,page:0,resultLimit:10})},I=()=>{r.resetFields(),n({keyword:null,role:null,status:null,page:0,resultLimit:10})},S=(t,i)=>{C(t-1),n({keyword:r.getFieldValue("keyword"),role:r.getFieldValue("role"),status:r.getFieldValue("status"),page:t-1,resultLimit:i||10})},A=[{title:"STT",key:"index",width:60,render:(t,i,l)=>l+1},{title:"Tên người dùng",dataIndex:"name",key:"name"},{title:"Email tài khoản",dataIndex:"email",key:"email"},{title:"Vai trò",dataIndex:"role",key:"role",render:t=>{let i;return t==="ADMIN"?i="gold":t==="USER"?i="blue":t==="DOCTOR"?i="cyan":i="default_color",e.jsx(k,{color:i,children:t})},width:100},{title:"Trạng thái",dataIndex:"status",key:"status",render:t=>e.jsx(k,{color:t==="0"?"red":"green",children:t==="0"?"INACTIVE":"ACTIVE"}),width:100},{title:"Ảnh",dataIndex:"avatar",key:"avatar",render:t=>e.jsx("img",{src:`${t}`,alt:"Ảnh",style:{maxWidth:"80px",maxHeight:"80px"}})},{title:"Action",key:"action",fixed:"right",width:100,render:(t,i)=>{const l=[{key:i.status==="1"?"active":"inactive",label:e.jsx("button",{onClick:()=>{b(i.id,i.status==="1"?"0":"1")},children:e.jsxs("p",{className:"",children:[i.status==="1"?e.jsx(R,{className:"inline-block mr-2 text-xl"}):e.jsx(D,{className:"inline-block mr-2 text-xl"}),i.status==="1"?"Inactive":"Active"]})})}];return i.role==="DOCTOR"&&l.push({key:"edit",label:e.jsx("a",{href:`cap-nhat-bac-si/${i.id}`,children:e.jsxs("p",{className:"",children:[e.jsx(_,{className:"inline-block mr-2 text-xl"}),"Sửa"]})})},{key:"manage",label:e.jsx("a",{href:`quan-ly-dich-vu/${i.id}`,children:e.jsxs("p",{className:"",children:[e.jsx(W,{className:"inline-block mr-2 text-xl"}),"Quản lý lịch hẹn đã đặt"]})})}),e.jsx("div",{className:"flex gap-2",children:e.jsx(Z,{size:"middle",children:e.jsx($,{menu:{items:l},trigger:["hover"],children:e.jsx("a",{children:e.jsx(H,{})})})})})}}];return e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Quản lý tài khoản"}),e.jsx(c,{type:"primary",className:"bg-blue-600",children:e.jsx(V,{to:"/admin/them-tai-khoan",children:"Tạo tài khoản"})})]}),e.jsx(s,{onFinish:T,form:r,children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 grid grid-cols-3 gap-10 mx-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[17px] my-1.5 text-gray-700",children:"Tên người dùng:"}),e.jsx(s.Item,{name:"keyword",children:e.jsx(P,{placeholder:"Nhập tên người dùng"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[17px] my-1.5 text-gray-700",children:"Vai trò:"}),e.jsx(s.Item,{name:"role",children:e.jsx(d,{placeholder:"---Select---",className:"w-full",loading:w,allowClear:!0,children:(p=o==null?void 0:o.data)==null?void 0:p.map(t=>e.jsx(B,{value:t.value,children:t.name},t.value))})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[17px] my-1.5 text-gray-700",children:"Trạng thái:"}),e.jsx(s.Item,{name:"status",children:e.jsx(d,{placeholder:"---Select---",className:"w-full",allowClear:!0,children:(h=m==null?void 0:m.data)==null?void 0:h.map(t=>e.jsx(d.Option,{value:t.value,children:t.name},t.value))})})]})]}),e.jsxs("div",{className:"mb-8 float-right mr-8 flex items-center gap-3",children:[e.jsx(c,{icon:e.jsx(U,{}),onClick:I,children:"Đặt lại"}),e.jsx(c,{type:"primary",icon:e.jsx(q,{}),className:"bg-blue-600",htmlType:"submit",children:"Tìm kiếm"})]})]})}),e.jsx(Q,{columns:A,dataSource:Array.isArray((u=a==null?void 0:a.data)==null?void 0:u.data)?(x=a==null?void 0:a.data)==null?void 0:x.data:[],loading:v,scroll:{y:240},pagination:{current:(g=a==null?void 0:a.data)!=null&&g.currentPage?a.data.currentPage+1:1,total:(j=a==null?void 0:a.data)==null?void 0:j.totalItems,pageSize:10,onChange:S}})]})};export{it as default};
