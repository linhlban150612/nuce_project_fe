import{r as k,q as O,G as A,C as M,p as V,j as e,L as E}from"./index-5d1582d4.js";import{k as D,l as P,m as U}from"./index-d5b70956.js";import{N as y}from"./Notification-b903467d.js";import{F as l}from"./index-2daf2b68.js";import{B as h}from"./button-1dd3c86b.js";import{I as B}from"./index-ef77481e.js";import{S as o}from"./index-a21a4ee5.js";import{T as Q,a as R}from"./index-89427187.js";import{S as G,D as _}from"./index-4ad10529.js";import{U as z}from"./UpOutlined-9e60ac00.js";import{M as H}from"./index-2499abbf.js";import{R as q}from"./ReloadOutlined-5d09a93f.js";import{S as K}from"./SearchOutlined-54091923.js";import{M as W}from"./MoreOutlined-371685d0.js";import{D as X}from"./DownOutlined-e8684ab4.js";import{E as $}from"./ExclamationCircleFilled-3566f72d.js";import"./iconBase-7dfc76c2.js";import"./render-43f47cb9.js";import"./asyncToGenerator-f41fc0b7.js";import"./CloseOutlined-21301cb3.js";import"./useZIndex-412122f7.js";import"./useCSSVarCls-2b45069f.js";import"./index-8ab4410e.js";import"./useMergedState-a94f801d.js";import"./Compact-de17ca2f.js";import"./ResizeObserver.es-f4289e8a.js";import"./index-98be3a7d.js";import"./reactNode-ed0d3403.js";import"./collapse-97de76d4.js";import"./row-140c9d21.js";import"./responsiveObserver-74647030.js";import"./useLocale-98ce2b95.js";import"./compact-item-f6aa6deb.js";import"./index-c0762df4.js";import"./BaseInput-5f67969b.js";import"./pickAttrs-c42834d1.js";import"./Overflow-dad1924c.js";import"./PurePanel-9c90c19c.js";import"./index-3f290c1a.js";import"./move-8c08fc05.js";import"./CheckOutlined-9e439339.js";import"./index-1944453b.js";import"./index-949dd1fb.js";import"./index-3651fbdb.js";import"./useBreakpoint-945b7321.js";import"./useForceUpdate-3f4a0339.js";import"./Pagination-bc2271f4.js";import"./LeftOutlined-79fdd531.js";import"./index-8ccb2d3a.js";import"./index-da9f04ea.js";import"./index-3aef6c56.js";import"./EllipsisOutlined-5f99f7fa.js";import"./extendsObject-e8a436b4.js";import"./useClosable-dc268733.js";import"./Dropdown-fc6ae30f.js";import"./fade-72ecde73.js";const{confirm:J}=H,et=()=>{var d,x,u,g,j,f;const[a]=l.useForm(),[v,N]=k.useState(1),[n,{data:s,isLoading:C}]=O(),[b]=A(),{data:c}=M(),{data:p}=V();k.useEffect(()=>{n({search:"",province:"",status:"",page:0,resultLimit:10})},[n]);const T=(t,i)=>{if(t!==void 0){const r=i==="1"?"Bạn có muốn chuyển trạng thái phòng khám này sang Active không??":"Bạn có muốn chuyển trạng thái phòng khám này sang Inactive không??";J({title:"Xác nhận đổi trạng thái",icon:e.jsx($,{}),content:r,okText:"Có",cancelText:"Không",okType:"danger",async onOk(){try{await b({id:t,status:i}),y("success","Thành công","Đã đổi trạng thái phòng khám thành công"),n({search:a.getFieldValue("search"),province:a.getFieldValue("province"),status:a.getFieldValue("status"),page:v-1,resultLimit:10})}catch{y("error","Lỗi","Lỗi đổi trạng thái")}}})}},S=t=>{n({search:t.search,province:t.province,status:t.status,page:0,resultLimit:10})},I=()=>{a.resetFields(),n({search:"",province:"",status:"",page:0,resultLimit:10})},F=(t,i)=>{N(t),n({search:a.getFieldValue("search"),province:a.getFieldValue("province"),status:a.getFieldValue("status"),page:t-1,resultLimit:i||10})},w=[{title:"STT",key:"index",width:100,render:(t,i,r)=>r+1},{title:"Tên phòng khám",dataIndex:"name",key:"name"},{title:"Ảnh",dataIndex:"imageUrl",key:"imageUrl",render:t=>e.jsx("img",{src:t,alt:"Ảnh",style:{maxWidth:"100px",maxHeight:"100px"}})},{title:"Địa chỉ",dataIndex:"address",key:"address"},{title:"Trạng thái",dataIndex:"status",key:"status",render:t=>e.jsx(R,{color:t==="0"?"red":"green",children:t==="0"?"INACTIVE":"ACTIVE"}),width:100},{title:"Action",key:"action",fixed:"right",width:100,render:(t,i)=>{const r=[{key:"edit",label:e.jsx("a",{href:`sua-phong-kham/${i.id}`,children:e.jsxs("p",{className:"",children:[e.jsx(D,{className:"inline-block mr-2 text-xl "}),"Sửa"]})})},{key:i.status==="1"?"active":"inactive",label:e.jsx("button",{onClick:()=>{T(i.id,i.status==="1"?"0":"1")},children:e.jsxs("p",{className:"",children:[i.status==="1"?e.jsx(P,{className:"inline-block mr-2 text-xl"}):e.jsx(U,{className:"inline-block mr-2 text-xl"}),i.status==="1"?"Inactive":"Active"]})})}];return e.jsx("div",{className:"flex gap-2",children:e.jsx(G,{size:"middle",children:e.jsx(_,{menu:{items:r},trigger:["hover"],children:e.jsx("a",{children:e.jsx(W,{})})})})})}}],L=({expanded:t,onExpand:i,record:r})=>!r.children||r.children.length===0?null:t?e.jsx(z,{onClick:m=>i(r,m),className:"mr-3"}):e.jsx(X,{onClick:m=>i(r,m),className:"mr-3"});return e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Quản lý phòng khám"}),e.jsx(h,{type:"primary",className:"bg-blue-500",children:e.jsx(E,{to:"/admin/them-phong-kham",children:"Tạo phòng khám"})})]}),e.jsx(l,{onFinish:S,form:a,children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 grid grid-cols-3 gap-10 mx-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[17px] my-1.5 text-gray-700",children:"Tên phòng khám:"}),e.jsx(l.Item,{name:"search",children:e.jsx(B,{placeholder:"Nhập tên phòng khám"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[17px] my-1.5 text-gray-700",children:"Trạng thái:"}),e.jsx(l.Item,{name:"status",children:e.jsx(o,{placeholder:"---Select---",className:"w-full",allowClear:!0,children:(d=c==null?void 0:c.data)==null?void 0:d.map(t=>e.jsx(o.Option,{value:t.value,children:t.name},t.value))})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[17px] my-1.5 text-gray-700",children:"Quận/Huyện:"}),e.jsx(l.Item,{name:"province",children:e.jsx(o,{placeholder:"---Select---",allowClear:!0,children:(x=p==null?void 0:p.data)==null?void 0:x.map(t=>e.jsx(o.Option,{value:t.code,children:t.name},t.code))})})]})]}),e.jsxs("div",{className:"mb-8 float-right mr-8 flex items-center gap-3",children:[e.jsx(h,{icon:e.jsx(q,{}),onClick:I,children:"Đặt lại"}),e.jsx(h,{type:"primary",icon:e.jsx(K,{}),className:"bg-blue-600",htmlType:"submit",children:"Tìm kiếm"})]})]})}),e.jsx(Q,{columns:w,dataSource:Array.isArray((u=s==null?void 0:s.data)==null?void 0:u.data)?(g=s==null?void 0:s.data)==null?void 0:g.data:[],loading:C,scroll:{y:400},expandable:{expandIcon:L},pagination:{current:(j=s==null?void 0:s.data)!=null&&j.currentPage?s.data.currentPage+1:1,total:(f=s==null?void 0:s.data)==null?void 0:f.totalItems,pageSize:10,onChange:F}})]})};export{et as default};
