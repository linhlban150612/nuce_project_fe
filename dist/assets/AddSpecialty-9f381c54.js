import{b as E,r as o,D as v,E as C,j as t,L as F}from"./index-5d1582d4.js";import{d as S,C as w}from"./ckeditor-05c5dc69.js";import{n as N}from"./index-d5b70956.js";import{N as r}from"./Notification-b903467d.js";import{F as i}from"./index-2daf2b68.js";import{E as q}from"./EnterOutlined-5a77cb95.js";import{R as M,C as x}from"./row-140c9d21.js";import{I as O}from"./index-ef77481e.js";import{U as A}from"./index-1567c69b.js";import{L as j}from"./compact-item-f6aa6deb.js";import{P as D}from"./PlusOutlined-c3648a15.js";import{B as R}from"./button-1dd3c86b.js";import"./iconBase-7dfc76c2.js";import"./render-43f47cb9.js";import"./asyncToGenerator-f41fc0b7.js";import"./ExclamationCircleFilled-3566f72d.js";import"./CloseOutlined-21301cb3.js";import"./useZIndex-412122f7.js";import"./useCSSVarCls-2b45069f.js";import"./index-8ab4410e.js";import"./useMergedState-a94f801d.js";import"./Compact-de17ca2f.js";import"./ResizeObserver.es-f4289e8a.js";import"./SearchOutlined-54091923.js";import"./index-98be3a7d.js";import"./reactNode-ed0d3403.js";import"./collapse-97de76d4.js";import"./useLocale-98ce2b95.js";import"./responsiveObserver-74647030.js";import"./index-c0762df4.js";import"./BaseInput-5f67969b.js";import"./pickAttrs-c42834d1.js";import"./fade-72ecde73.js";import"./useForceUpdate-3f4a0339.js";import"./CheckOutlined-9e439339.js";const bt=()=>{const f=E(),[m]=i.useForm(),[l,y]=o.useState(null),[c,b]=o.useState(null),[d,p]=o.useState(!1),[I,{isLoading:L}]=v(),[T]=C(),U=async a=>{b(a),p(!0),setTimeout(()=>{const e=URL.createObjectURL(a);y(e),p(!1)},2e3)},k=async a=>{try{delete a.imageObjectId;const e={...a,status:1};T(e).unwrap().then(s=>{var u;const h=(u=s==null?void 0:s.data)==null?void 0:u.data,n=new FormData;c&&n.append("image",c),h&&n.append("id",h),I(n).unwrap().then(()=>{r("success","Thành công","Thêm thành công"),f("/admin/quan-ly-chuyen-khoa")}).catch(g=>{r("error","Lỗi",g.message||g.data.message)})}).catch(s=>{r("error","Lỗi",s.message||s.data.message)})}catch(e){console.error("Error adding specialty:",e),r("error","Lỗi","Thêm không thành công")}};return t.jsxs("div",{className:"",children:[t.jsxs(F,{to:"/admin/quan-ly-chuyen-khoa",children:["Quay lại ",t.jsx(q,{})]}),t.jsx("h2",{className:"my-6 mx-16 text-2xl font-semibold",children:"Tạo chuyên khoa"}),t.jsxs(i,{className:"mx-40",form:m,name:"basic",labelCol:{span:24},wrapperCol:{span:24},onFinish:k,labelWrap:!0,autoComplete:"off",children:[t.jsxs(M,{gutter:16,children:[t.jsx(x,{span:12,children:t.jsx(i.Item,{label:"Tên chuyên khoa",name:"name",rules:[{required:!0,message:"Trường này không được bỏ trống !"},{min:3,message:"Tối thiểu 3 ký tự!"}],children:t.jsx(O,{})})}),t.jsx(x,{span:12,children:t.jsx(i.Item,{label:"Ảnh",name:"imageObjectId",rules:[{required:!0,message:"Trường này không được bỏ trống !"}],children:t.jsx(A,{beforeUpload:a=>{const e="2";a.size/1024/1024<e?U(a):r("warning","Cảnh báo","Ảnh không được quá "+e.toString()+"MB")},showUploadList:!1,listType:"picture-card",accept:"image/*",children:l?d?t.jsxs("div",{children:[t.jsx(j,{}),t.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):t.jsx("img",{src:l,alt:"Ảnh đã upload",style:{width:"100%"}}):t.jsx("div",{children:d?t.jsxs("div",{children:[t.jsx(j,{}),t.jsx("div",{style:{marginTop:8},children:"Đang tải ảnh..."})]}):t.jsxs("div",{children:[t.jsx(D,{}),t.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})})})]}),t.jsx(i.Item,{name:"descriptionHtml",label:"Mô tả",rules:[{required:!0,message:"Vui lòng không bỏ trống"}],children:t.jsx(S.CKEditor,{editor:w,onChange:(a,e)=>{const s=e.getData();m.setFieldsValue({descriptionHtml:s})}})}),t.jsx(i.Item,{labelAlign:"left",children:t.jsx(R,{type:"primary",htmlType:"submit",className:"bg-blue-500",children:L?t.jsx(N,{className:"animate-spin"}):"Thêm"})})]})]})};export{bt as default};
